function initNavigation(){const e=document.querySelector(".navbar-toggle"),t=document.querySelector(".navbar-menu");e&&t&&(e.addEventListener("click",()=>{const n="true"===e.getAttribute("aria-expanded");e.setAttribute("aria-expanded",!n),t.classList.toggle("active")}),document.addEventListener("click",n=>{e.contains(n.target)||t.contains(n.target)||(e.setAttribute("aria-expanded","false"),t.classList.remove("active"))}),document.addEventListener("keydown",n=>{"Escape"===n.key&&t.classList.contains("active")&&(e.setAttribute("aria-expanded","false"),t.classList.remove("active"),e.focus())}));document.querySelectorAll(".nav-item--dropdown").forEach(e=>{const t=e.querySelector(".nav-link"),n=e.querySelector(".mega-menu");t&&n&&t.addEventListener("keydown",e=>{if("Enter"===e.key||" "===e.key){e.preventDefault();const n="true"===t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",!n)}})})}function initCarousel(){const e=document.querySelector(".carousel");if(!e)return;const t=e.querySelectorAll(".carousel-slide"),n=e.querySelector(".carousel-btn--prev"),a=e.querySelector(".carousel-btn--next"),o=e.querySelectorAll(".carousel-indicator");let s,i=0;function r(e){i=e<0?t.length-1:e>=t.length?0:e,t.forEach((e,t)=>{e.classList.toggle("active",t===i),e.setAttribute("aria-hidden",t!==i)}),o.forEach((e,t)=>{e.classList.toggle("active",t===i),e.setAttribute("aria-selected",t===i)});const n=t[i].querySelector(".lazy-load");n&&lazyLoadImage(n);const a=(i+1)%t.length,s=t[a].querySelector(".lazy-load");s&&lazyLoadImage(s)}function c(){r(i+1)}function l(){r(i-1)}function d(){s=setInterval(c,5e3)}function u(){clearInterval(s)}n&&n.addEventListener("click",()=>{l(),u(),d()}),a&&a.addEventListener("click",()=>{c(),u(),d()}),o.forEach((e,t)=>{e.addEventListener("click",()=>{r(t),u(),d()})}),e.addEventListener("keydown",e=>{"ArrowLeft"===e.key?(l(),u(),d()):"ArrowRight"===e.key&&(c(),u(),d())}),e.addEventListener("mouseenter",u),e.addEventListener("mouseleave",d),e.addEventListener("focusin",u),e.addEventListener("focusout",d);let m=0,v=0;e.addEventListener("touchstart",e=>{m=e.changedTouches[0].screenX,u()},{passive:!0}),e.addEventListener("touchend",e=>{v=e.changedTouches[0].screenX,function(){const e=v-m;Math.abs(e)>50&&(e>0?l():c())}(),d()},{passive:!0}),r(0),d()}function initLazyLoading(){const e=document.querySelectorAll(".lazy-load");if("IntersectionObserver"in window){const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(lazyLoadImage(e.target),t.unobserve(e.target))})},{rootMargin:"50px 0px",threshold:.01});e.forEach(e=>t.observe(e))}else e.forEach(e=>lazyLoadImage(e))}function lazyLoadImage(e){const t=e.getAttribute("data-src");if(!t||e.classList.contains("loaded"))return;const n=new Image;n.onload=()=>{e.src=t,e.classList.add("loaded")},n.onerror=()=>{console.error("Failed to load image:",t),e.alt="Image failed to load"},n.src=t}function initMultiStepForm(){const e=document.getElementById("contactForm");if(!e)return;const t=e.querySelectorAll(".form-step"),n=e.querySelectorAll(".step-indicator"),a=e.querySelector(".progress-fill"),o=e.querySelectorAll(".btn-next"),s=e.querySelectorAll(".btn-prev");let i=0;const r={firstName:{required:!0,minLength:2,pattern:/^[a-zA-Z\s]+$/,message:"Please enter a valid first name (letters only, minimum 2 characters)"},lastName:{required:!0,minLength:2,pattern:/^[a-zA-Z\s]+$/,message:"Please enter a valid last name (letters only, minimum 2 characters)"},email:{required:!0,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Please enter a valid email address"},phone:{required:!1,pattern:/^[\d\s\-\+\(\)]+$/,message:"Please enter a valid phone number"},projectType:{required:!0,message:"Please select a project type"},budget:{required:!0,message:"Please select a budget range"},message:{required:!0,minLength:10,message:"Please provide a project description (minimum 10 characters)"}};function c(e){const t=e.name,n=r[t];if(!n)return!0;const a=e.value.trim(),o=document.getElementById(`${t}-error`);return n.required&&!a?(l(e,o,n.message),!1):n.required||a?n.minLength&&a.length<n.minLength||n.pattern&&!n.pattern.test(a)?(l(e,o,n.message),!1):(d(e,o),e.classList.add("success"),!0):(d(e,o),!0)}function l(e,t,n){e.classList.add("error"),e.classList.remove("success"),t&&(t.textContent=n,t.classList.add("show")),e.setAttribute("aria-invalid","true")}function d(e,t){e.classList.remove("error"),t&&(t.textContent="",t.classList.remove("show")),e.setAttribute("aria-invalid","false")}function u(e){const n=t[e].querySelectorAll("input[required], select[required], textarea[required]");let a=!0;return n.forEach(e=>{c(e)||(a=!1)}),a}function m(){const e=(i+1)/t.length*100;a.style.width=`${e}%`,n.forEach((e,t)=>{e.classList.remove("active","completed"),t<i?e.classList.add("completed"):t===i&&e.classList.add("active")})}function v(e){t.forEach((t,n)=>{t.classList.toggle("active",n===e)}),i=e,m();const n=t[i].querySelector("input, select, textarea");n&&setTimeout(()=>n.focus(),100)}o.forEach(e=>{e.addEventListener("click",()=>{u(i)&&i<t.length-1&&v(i+1)})}),s.forEach(e=>{e.addEventListener("click",()=>{i>0&&v(i-1)})}),e.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("blur",()=>{e.value&&c(e)}),e.addEventListener("input",()=>{e.classList.contains("error")&&c(e)})}),e.addEventListener("submit",n=>{n.preventDefault();let a=!0;if(t.forEach((e,t)=>{u(t)||(a=!1,i!==t&&v(t))}),a){const t=new FormData(e),n=Object.fromEntries(t.entries());console.log("Form submitted successfully:",n);addSubmissionToPage({name:`${n.firstName} ${n.lastName}`,email:n.email,body:n.message||"Thank you for your interest!",company:n.company||"Client"}),alert("Thank you for your testimonial! It has been added to the testimonials section above."),e.reset(),v(0),setTimeout(()=>{document.getElementById("testimonials")?.scrollIntoView({behavior:"smooth"})},500),e.querySelectorAll("input, select, textarea").forEach(e=>{e.classList.remove("error","success"),e.setAttribute("aria-invalid","false");const t=document.getElementById(`${e.name}-error`);t&&(t.textContent="",t.classList.remove("show"))})}}),m()}async function loadTestimonials(){const e=document.getElementById("testimonials-container");if(e)try{const t=await fetch("https://jsonplaceholder.typicode.com/comments?_limit=6");if(!t.ok)throw new Error("Failed to fetch testimonials");const n=await t.json();e.innerHTML="",n.forEach(t=>{const n=createTestimonialCard(t);e.appendChild(n)})}catch(t){console.error("Error loading testimonials:",t),e.innerHTML='\n      <div class="error-message" style="grid-column: 1 / -1; text-align: center; padding: 2rem;">\n        <p>Unable to load testimonials at this time. Please try again later.</p>\n      </div>\n    '}}function createTestimonialCard(e){const t=document.createElement("div");t.className="testimonial-card";const n=e.email.split("@")[0].split(".").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),a=e.body.length>150?e.body.substring(0,150)+"...":e.body;return t.innerHTML=`\n    <div class="testimonial-content">\n      <p>"${a}"</p>\n    </div>\n    <div class="testimonial-author">\n      <div class="author-info">\n        <h4>${n}</h4>\n        <p>Client</p>\n      </div>\n    </div>\n  `,t}function addSubmissionToPage(e){const t=document.getElementById("testimonials-container");if(!t)return;const n=document.createElement("div");n.className="testimonial-card submission-card",n.style.animation="fadeInUp 0.5s ease",n.innerHTML=`\n    <div class="testimonial-content">\n      <p>"${e.body}"</p>\n    </div>\n    <div class="testimonial-author">\n      <div class="author-info">\n        <h4>${e.name}</h4>\n        <p>${e.company}</p>\n      </div>\n    </div>\n  `,t.insertBefore(n,t.firstChild)}function initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){const t=this.getAttribute("href");if(!t||"#"===t)return;const n=document.querySelector(t);if(n){e.preventDefault();const t=document.querySelector(".navbar-menu"),a=document.querySelector(".navbar-toggle");t&&t.classList.contains("active")&&(t.classList.remove("active"),a&&a.setAttribute("aria-expanded","false"));const o=document.querySelector(".header")?.offsetHeight||70,s=n.getBoundingClientRect().top+window.pageYOffset-o;window.scrollTo({top:s,behavior:"smooth"}),n.setAttribute("tabindex","-1"),n.focus()}})})}function initKeyboardNavigation(){document.querySelectorAll(".carousel-btn, .carousel-indicator").forEach(e=>{e.addEventListener("keydown",t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.click())})}),document.addEventListener("mousedown",()=>{document.body.classList.add("using-mouse")}),document.addEventListener("keydown",e=>{"Tab"===e.key&&document.body.classList.remove("using-mouse")})}function debounce(e,t){let n;return function(...a){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e(...a)},t)}}function throttle(e,t){let n;return function(...a){n||(e.apply(this,a),n=!0,setTimeout(()=>n=!1,t))}}document.addEventListener("DOMContentLoaded",()=>{initNavigation(),initCarousel(),initLazyLoading(),initMultiStepForm(),loadTestimonials(),initSmoothScrolling(),initKeyboardNavigation()}),console.log("Frontend Portfolio JavaScript initialized successfully!");